# Руководство по размещению SocialPlus на InfinityFree

## Подготовка проекта

1. Убедитесь, что у вас есть все необходимые файлы:
   - `requirements.txt` - список зависимостей
   - `passenger_wsgi.py` - для запуска приложения
   - `.htaccess` - для настройки Apache
   - `app.py` - основной файл приложения

2. Создайте файл с переменными окружения `.env` (будет загружен на хостинг):
   ```
   FLASK_APP=app.py
   FLASK_CONFIG=infinityfree
   SECRET_KEY=ваш_секретный_ключ
   DATABASE_URL=mysql://username:password@localhost/database_name
   ```

## Регистрация на InfinityFree

1. Перейдите на [InfinityFree](https://www.infinityfree.com/) и создайте аккаунт
2. После входа в панель управления нажмите "New Website"
3. Заполните форму:
   - Выберите бесплатный план
   - Выберите субдомен (например, socialplus.epizy.com)
   - Или укажите свой домен (если у вас есть)
4. Дождитесь создания сайта (может занять несколько минут)

## Настройка базы данных

1. В панели управления InfinityFree перейдите в раздел "MySQL Databases"
2. Создайте новую базу данных
   - Запишите имя пользователя, пароль и название базы
   - Они понадобятся для настройки приложения
3. Перейдите в phpMyAdmin через панель управления
4. Импортируйте структуру базы данных:
   - Создайте SQL-скрипт для создания таблиц (команды CREATE TABLE)
   - Или используйте инструменты Flask-Migrate для генерации скрипта

## Подготовка файлов для загрузки

1. Создайте файл `.user.ini` в корне проекта:
   ```ini
   [PHP]
   display_errors = On
   error_reporting = E_ALL
   ```

2. Обновите файл `passenger_wsgi.py` для работы с MySQL:
   ```python
   import sys, os
   
   sys.path.insert(0, os.path.dirname(__file__))
   
   from app import create_app
   application = create_app('infinityfree')
   
   def application(environ, start_response):
       return application.wsgi_app(environ, start_response)
   ```

3. Создайте архив для загрузки на хостинг (zip-файл с вашим проектом)

## Загрузка файлов на хостинг

1. В панели управления InfinityFree перейдите к информации о FTP доступе
2. Используйте FTP-клиент (например, FileZilla) со следующими настройками:
   - Хост: указан в панели управления
   - Имя пользователя: указано в панели управления
   - Пароль: ваш пароль от аккаунта InfinityFree
   - Порт: 21
3. Подключитесь к серверу и перейдите в папку `htdocs`
4. Загрузите все файлы проекта в эту папку

## Проверка и отладка

1. Откройте ваш сайт в браузере (yoursite.epizy.com)
2. Если возникают ошибки:
   - Проверьте логи в панели управления InfinityFree
   - Убедитесь, что все пути к файлам корректны
   - Проверьте настройки подключения к базе данных

## Получение бесплатного домена (опционально)

Если вы хотите собственный домен вместо субдомена:

1. Перейдите на [Freenom](https://www.freenom.com/)
2. Найдите и зарегистрируйте бесплатный домен (.tk, .ml, .ga, .cf или .gq)
3. В панели управления Freenom:
   - Перейдите в "Manage Domain" > "Management Tools" > "Nameservers"
   - Установите DNS-серверы InfinityFree (перечислены в панели управления InfinityFree)
4. В панели управления InfinityFree:
   - Перейдите в раздел "Domains"
   - Добавьте ваш домен
   - Дождитесь изменения DNS (может занять до 24 часов)

## Дополнительные настройки

### Настройка SSL (HTTPS)

InfinityFree предоставляет бесплатный SSL:

1. В панели управления перейдите в раздел "SSL"
2. Активируйте SSL для вашего сайта
3. Обновите конфигурацию, чтобы перенаправлять HTTP на HTTPS:
   - Добавьте в `.htaccess`:
     ```
     RewriteEngine On
     RewriteCond %{HTTPS} off
     RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
     ```

### Настройка для SEO

1. Создайте файл `robots.txt` в корне проекта:
   ```
   User-agent: *
   Allow: /
   Disallow: /admin/
   ```

2. Создайте файл `sitemap.xml` для лучшей индексации

## Обслуживание сайта

- Регулярно делайте резервные копии базы данных
- Если вы используете бесплатный домен от Freenom, продлевайте его каждые 12 месяцев
- Обновляйте приложение через FTP при внесении изменений
- Проверяйте логи для своевременного обнаружения проблем 